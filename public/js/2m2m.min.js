/*! Project: 2Minutes2Midnight | Version #: 1.0.0 | Created: 2013-12-31 */
function formatTime($days,$hours,$minutes,$seconds){return $result="",10>$days&&($result+="0"),$result+=$days,$result+="d ",10>$hours&&($result+="0"),$result+=$hours,$result+="h ",10>$minutes&&($result+="0"),$result+=$minutes,$result+="m ",10>$seconds&&($result+="0"),$result+=$seconds,$result+="s"}function CountdownCtrl($scope,$timeout){$scope.onTimeout=function(){var target=new Date(2013,11,31,3,33,0,0),now=new Date,seconds_left=(target-now)/1e3;return 0>=seconds_left?($("#counterSpace").hide(),$scope.counter="Happy New Year",$("#counterSpace").fadeIn(400),void 0):(days=parseInt(seconds_left/86400),seconds_left%=86400,hours=parseInt(seconds_left/3600),seconds_left%=3600,minutes=parseInt(seconds_left/60),seconds=parseInt(seconds_left%60),$scope.counter=formatTime(days,hours,minutes,seconds),mytimeout=$timeout($scope.onTimeout,1e3),void 0)};var mytimeout=$timeout($scope.onTimeout,0)}function startAmbience(timeout){setInterval(function(){$("body").css("background-color",bgColors[currentColor]),currentColor=(currentColor+1)%bgColors.length},timeout)}var messages=[],currentMessage=0;setInterval(function(){$.get("messages/list","application/json",function(data){messages=data.messages,console.log(messages),currentMessage=(currentMessage+1)%messages.length,$("#currentMessage p").hide().html(messages[currentMessage]).fadeIn("slow")},"json")},3e3);var controller=new Leap.Controller,play=!0;controller.on("connect",function(){console.log("Leap connected")}),controller.on("ready",function(){console.log("Leap ready")}),controller.loop(function(frame){play||0!=frame.hands.length?play&&1==frame.hands.length&&($("#carousel").trigger("stop"),play=!1):($("#carousel").trigger("play",!0),play=!0)}),$(function(){var old_array=[],$c=$("#carousel"),$w=$(window);$c.carouFredSel({direction:"up",items:1,auto:!0,scroll:{delay:3e3,onAfter:function(){$.get("photos/list","application/json",function(data){var images="",diff=[];0!=old_array.length&&(diff=$(data.photos).not(old_array).get()),console.log(diff);for(var i=0;i<diff.length;i++)images="<div><img id='img"+i+"' src='photos/thumbs/"+diff[i]+"' alt='img'/></div>",$("#carousel").trigger("insertItem",[$(images),1,!1]);old_array=data.photos,console.log(images)},"json"),console.log("Timeout")}}}),$w.bind("resize.example",function(){var nw=$w.width();990>nw&&(nw=990),$c.width(3*nw),$c.parent().width(nw)}).trigger("resize.example")});var bgColors=["#9f2719","#ffab24","#417938","#76c73c","#1d9a70","#26477d","#3cbbe6","#51395b","#a61e2c","#ec1c18","#fc596c","#fe7515","#f0b706"],currentColor=0;